@model Data_Manager.Models.tbl_SaleMaster

@{
    Data_Manager.Models.Entities_Data db= new Data_Manager.Models.Entities_Data();
  //  Data_Manager.Models.tbl_InvoiceInfo tb = new Data_Manager.Models.tbl_InvoiceInfo().;
    Layout = null;
    List<Data_Manager.Models.tbl_SaleDetail> items = Model.tbl_SaleDetail.ToList();
    items=items.Where(a => a.Sale_Status == "S").ToList();
    List<Data_Manager.Models.tbl_SaleDetail> items1 = Model.tbl_SaleDetail.ToList();
    items1 = items1.Where(a => a.Sale_Status == "R").ToList();


    var aaa =db.tbl_InvoiceInfo.Where(a => a.isactive=="Y" && a.ID==Model.invoiceid).FirstOrDefault();
    
    
    //List<Data_Manager.Models.tbl_InvoiceInfo> invdata = Model.tbl_InvoiceInfo.First();
    //invdata = invdata.Where(a => a.isactive == "y").ToList();
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Print Invoice</title>   
</head>
<body>
   
    
    <div style="font-size:15px; color: black;
            width: 98%;


            border: 0.5px solid #c4c7c7;
            padding: 10px 10px 20px 10px;

            z-index: 0;" id="print-area-2" class="print-area">
        @*<div style="text-align:right;"><a href="" id="print" >Print</a></div>*@
        @*<div id="page">*@
        <h1 style="text-align:center;letter-spacing: 9px;">@aaa.CompanyName  </h1>
        <p style="text-align:center;margin-top: -17px;">@aaa.Addressline1</p><hr />
        <p class="">
            <span style="float:right">
            User ID : @Model.CreateBy <br />
            Invoice No : <b>#@Model.SaleMst_ID.ToString()</b><br />
            Date : @String.Format("{0: dd-MMM-yy hh:mm tt}", @Model.CreateDate)
            </span><br>
            <span style="max-width:40%;">
                Customer: <strong>@Model.tbl_Employee.Name</strong><br />
                
                <span class="white-space-pre">@Model.tbl_Employee.Address</span><br />
                @Model.tbl_Employee.PhoneNo<br>
            </span>
        </p>
        <style>

            .white-space-pre 
            {
                white-space: pre-wrap;
            }
        </style>



        @*@String.Format("{0: dd-MMM-yy hh:mm tt}", @Model.CreateDate)
      <br>
        <b>Customer: @Model.tbl_Employee.Name</b>*@


        <hr />

        <style>
            th,td{
                border: 1px solid gray;
            }
        </style>
        <table style="width: 100%"   cellspacing="0">
            <thead style="">
                <tr>

                    <th style="padding: 8px;">Qty</th>
                    <th>Item</th>
                    <th>Make</th>
                    <th>Unit Price</th>
                    
                        <th class="dis">Total Amount</th>
                    <th class="dis" id="thide">Disc(%)</th>
                     
                    <th>Net Amount</th>
                </tr>
            </thead>

            <tbody style="font-size: 15px !important;">
                @foreach (var item in items)
                {
                    <tr>
                        <td style="padding:5px;">@Convert.ToInt32(item.Stock_Counts)</td>
                        <td>@item.tbl_SalesTypeSetupForm.Name</td>
                        <td>@item.tbl_SalesTypeSetupForm.tbl_Brand.Name</td>
                        <td align="right">@item.tbl_Stock.Unit_Amount</td>
                        <td align="right" class="dis">@Convert.ToInt32(@Convert.ToInt32(@item.Net_Sale_Price) + @Convert.ToInt32(@item.Discount_Amount))  </td>
                        <td align="center" class="dis">@item.Discount_Amount (@item.Discount__%)</td>
                        @*<td>@Convert.ToInt32(item.tbl_Product.HoleSaleUnitPrice)</td>*@
                        <td align="right"> @item.Net_Sale_Price </td>
                    </tr>
                }

                <tr  class="odd" style="font-weight:bold; height:70px;">
                    <td colspan="7"></td>
                    
                </tr>
                <tr class="" style="font-weight:bold;">
                    <td id="colspan"  colspan="5"></td>
                    <td style="padding:8px;">Net Amount</td>
                    <td align="right">Rs. @String.Format("{0:n2}", Convert.ToInt32(Model.Total_Amount)) </td>
                </tr>
                @*<tr class="odd" style="font-weight:bold;">
                        <td colspan="2"></td>
                        <td>Discount(@Convert.ToInt32(Model.Discount__)%)</td>
                        <td>Rs.@Convert.ToInt32(Model.Discount_Amount)</td>
                    </tr>*@
                @*<tr class="odd" style="font-weight:bold;">
                        <td colspan="2"></td>
                        <td>Net Pay</td>
                        <td>Rs.@Convert.ToInt32(Model.Net_Amount)</td>
                    </tr>*@
                @*<tr class="odd" style="font-weight:bold;">
                        <td colspan="2"></td>
                        <td>Advance</td>
                        <td>Rs.@Convert.ToInt32(Model.Advance)</td>
                    </tr>
                    <tr class="odd" style="font-weight:bold;">
                        <td colspan="2"></td>
                        <td>Balance</td>
                        <td>Rs.@Convert.ToInt32(Model.Balance)</td>
                    </tr>*@
            </tbody>
        </table><br /><br />
        @if (@items1.Count() > 0)
        {
            <table width="250" border="1" align="left" cellspacing="0">
                <thead style="text-align: left;">
                    <tr>
                        <th>Qty</th>
                        <th>Item</th>
                        <th>Make</th>
                        <th>Unit Price</th>
                        <th>Total Amount</th>
                        <th>Disc(%)</th>
                        <th>Net Amount</th>
                        @*<th style="WIDTH: 79PX;">Unit</th>*@
                       
                    </tr>
                </thead>



                <span>Sale Return Item(s)</span>
                <tbody style="font-size: 10px !important;">
                    @foreach (var item1 in items1)
                    {
                        <tr>
                            <td>@Convert.ToInt32(item1.Stock_Counts)</td>
                            <td>@item1.tbl_SalesTypeSetupForm.Name</td>
                            <td>@item1.tbl_SalesTypeSetupForm.tbl_Brand.Name</td>
                            <td>@item1.tbl_Stock.Unit_Amount</td>
                            <td class="dis">@item1.Net_Sale_Price + @item1.Discount_Amount </td>
                            <td class="dis">@item1.Discount_Amount (@item1.Discount__%)</td>
                            @*<td>@Convert.ToInt32(item.tbl_Product.HoleSaleUnitPrice)</td>*@
                            <td> @item1.Net_Sale_Price </td>
                        </tr>
                    }

                    <tr class="odd" style="font-weight:bold;">
                        <td colspan="1"></td>
                        <td>------</td>
                        <td>------</td>
                    </tr>
                    <tr class="odd" style="font-weight:bold;">
                        <td colspan="1"></td>
                        <td>@*Net Amount*@</td>
                        <td>@*Rs.@Convert.ToInt32(Model.Total_Amount)*@</td>
                    </tr>
                    @*<tr class="odd" style="font-weight:bold;">
                            <td colspan="2"></td>
                            <td>Discount(@Convert.ToInt32(Model.Discount__)%)</td>
                            <td>Rs.@Convert.ToInt32(Model.Discount_Amount)</td>
                        </tr>*@
                    @*<tr class="odd" style="font-weight:bold;">
                            <td colspan="2"></td>
                            <td>Net Pay</td>
                            <td>Rs.@Convert.ToInt32(Model.Net_Amount)</td>
                        </tr>*@
                    @*<tr class="odd" style="font-weight:bold;">
                            <td colspan="2"></td>
                            <td>Advance</td>
                            <td>Rs.@Convert.ToInt32(Model.Advance)</td>
                        </tr>
                        <tr class="odd" style="font-weight:bold;">
                            <td colspan="2"></td>
                            <td>Balance</td>
                            <td>Rs.@Convert.ToInt32(Model.Balance)</td>
                        </tr>*@
                </tbody>
            </table>

            @*   </div>*@


        }
        <hr />
       <br />
       <br />

        <p>
            <span style="">
                <span>----------------------</span><br />
                <sub>Receiver's Stamp & Signature</sub>
            </span>
            <span style="float:right">
                <span>----------------------</span><br />
                <sub>For <b>@aaa.CompanyName</b></sub>
                </span>
            </p><br />
            <hr />
            <h3>@aaa.fields1</h3>
            @aaa.fields2<br />
            @aaa.fields3<br />
           
            @*0213-1234567<br />*@
        <sub> Powered By: @aaa.fields4</sub>

</div>
    <textarea id="printing-css" style="display:none;">html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}table{border-collapse:collapse;border-spacing:0}body{font:normal normal .8125em/1.4 Arial,Sans-Serif;background-color:white;color:#333}strong,b{font-weight:bold}cite,em,i{font-style:italic}a{text-decoration:none}a:hover{text-decoration:underline}a img{border:none}abbr,acronym{border-bottom:1px dotted;cursor:help}sup,sub{vertical-align:baseline;position:relative;top:-.4em;font-size:86%}sub{top:.4em}small{font-size:86%}kbd{font-size:80%;border:1px solid #999;padding:2px 5px;border-bottom-width:2px;border-radius:3px}mark{background-color:#ffce00;color:black}p,blockquote,pre,table,figure,hr,form,ol,ul,dl{margin:1.5em 0}hr{height:1px;border:none;background-color:#666}h1,h2,h3,h4,h5,h6{font-weight:bold;line-height:normal;margin:1.5em 0 0}h1{font-size:200%}h2{font-size:180%}h3{font-size:160%}h4{font-size:140%}h5{font-size:120%}h6{font-size:100%}ol,ul,dl{margin-left:3em}ol{list-style:decimal outside}ul{list-style:disc outside}li{margin:.5em 0}dt{font-weight:bold}dd{margin:0 0 .5em 2em}input,button,select,textarea{font:inherit;font-size:100%;line-height:normal;vertical-align:baseline}textarea{display:block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}pre,code{font-family:"Courier New",Courier,Monospace;color:inherit}pre{white-space:pre;word-wrap:normal;overflow:auto}blockquote{margin-left:2em;margin-right:2em;border-left:4px solid #ccc;padding-left:1em;font-style:italic}table[border="1"] th,table[border="1"] td,table[border="1"] caption{border:1px solid;padding:.5em 1em;text-align:left;vertical-align:top}th{font-weight:bold}table[border="1"] caption{border:none;font-style:italic}.no-print{display:none}</textarea>
    <iframe id="printing-frame" name="print_frame" src="about:blank" style="display:none;"></iframe>
    <script>
        window.addEventListener("load", function () {

            window.print();
            window.close();

        });
      
    </script>
   
    <script src="~/js/plugins/jquery/jquery.min.js"></script>
    <script>
        //alert();
        $('#thide').click(function () {
      
            $('.dis').remove();

            $('#colspan').attr("colspan", "3");

        })
    </script>
  
</body>
</html>
